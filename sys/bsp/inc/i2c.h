/**
 * @file i2c.h
 *
 * @brief i2c routines
 */

#ifndef _I2C_H_
#define _I2C_H_

#ifdef __cplusplus
extern "C"
{
#endif

//=====================================================================================================================
// Includes
//=====================================================================================================================

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

#include "stm32g070xx.h"

//=====================================================================================================================
// Types
//=====================================================================================================================

typedef void (*i2cDMACompleteCb)(void);
typedef void (*i2cDMAErrorCb)(void);

//=====================================================================================================================
// Defines
//=====================================================================================================================

// only valid for 64MHz PCLK + analog filter enable!!
#define I2C_100KHZ (0x10B17DB5)
#define I2C_400KHZ (0x00C12166)
#define I2C_1MHZ (0x00910B1C)

//=====================================================================================================================
// Functions
//=====================================================================================================================

void initI2C(I2C_TypeDef *, uint32_t, bool);

void initDisplayI2CDMA(size_t, uint32_t, i2cDMACompleteCb, i2cDMAErrorCb);

#ifdef __cplusplus
}
#endif
#endif //!_I2C_H_